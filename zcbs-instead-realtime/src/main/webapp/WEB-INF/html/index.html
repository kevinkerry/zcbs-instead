<html>
<head>
	<meta charset="UTF-8">
	<title>实时代收,代付,查询</title>
<style type="text/css">
body {
	margin:0px;
	font-size:13px;
	font-family:Arial;
} 
#container{
	position:relative;
	width:100%;
}
#banner{
	height:20px;
	border:1px solid #000000;
	text-align:center;
	background-color:#a2d9ff;
	padding:10px;
	margin-bottom:2px;
}
#content{
	float:left;
	text-align:right;
	padding-right:200px;	
}
#links{
	float:left;
	width:33.1%;
	height:500px;
	border:1px solid #000000;
	text-align:left;
}
#footer{
	clear:both;			
	text-align:right;
	height:30px;
	border:1px solid #000000;
}
</style>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<div id="container">
	<div id="banner">
		<strong>实时代收代付接口测试</strong>
	</div>
	
	<div id="links">
		<h2>加密后的密文</h2>
		<form id="miresult" action="deco">
		<div style="width:100% ;word-wrap:break-word; overflow:hidden;">
			<h3>sign:</h3>
			<div id="divsign"></div>
			<input id="sign" type="hidden" name="sign" />
		</div>
		<div style="width:100% ;word-wrap:break-word; overflow:hidden;">
			<h3>addit:</h3>
			<div id="divaddit"></div>
			<input id="addit" type="hidden" name="addit" '/>
		</div>
		<div style="width:100% ;word-wrap:break-word; overflow:hidden;">
			<h3>data:</h3>
			<div id="divdata"></div>
			<input id="data" type="hidden" name="data" />
		</div>
		<div>
		</div>
		</form>
	</div>
</div>
<div id="container">
	<div id="links">
		<h2>实时代付</h2>
		<form id="paysubmit" action="paysubmit"> 
			<table>
			<tr>
				<td style="text-align: right">版本:<input type="text"  name="version" value="1.0"/></td>
				<td style="text-align: right">编码方式:<input type="text"  name="encoding" value="1"/></td>
				</tr><tr>
				<td style="text-align: right">交易类型:<input type="text"  name="txnType" value="02"/></td>
				<td style="text-align: right">交易子类:<input type="text"  name="txnSubType" value="00"/></td>
				</tr><tr>
				<td style="text-align: right">产品类型:<input type="text"  name="bizType" value="000002"/></td>
				<td style="text-align: right">通知地址:<input type="text"  name="backUrl" value="www.sina.com"/></td>
				</tr><tr>
				<td style="text-align: right">委托机构代码:<input type="text"  name="merId" value="200000000000610"/></td>
				<td style="text-align: right">委托机构全称:<input type="text"  name="merName" value="全称"/></td>
				</tr><tr>
				<td style="text-align: right">委托机构简称:<input type="text"  name="merAbbr" value="8简称"/></td>
				<td style="text-align: right">委托机构订单号:<input type="text"  name="orderId" value="934567"/></td>
				</tr><tr>
				<td style="text-align: right">订单发送时间:<input type="text"  name="txnTime" value="20170306060606"/></td>
				<td style="text-align: right">支付超时时间:<input type="text"  name="payTimeout" value="20170307060606"/></td>
				</tr><tr>
				<td style="text-align: right">交易金额:<input type="text"  name="txnAmt" value="12"/></td>
				<td style="text-align: right">交易币种:<input type="text"  name="currencyCode" value="156"/></td>
				</tr><tr>
				<td style="text-align: right">加密信息域:<input type="text"  name="encryptData" value="14"/></td>
				<td style="text-align: right">订单描述:<input type="text"  name="orderDesc" value="15"/></td>
				</tr><tr>
				<td style="text-align: right">保留域:<input type="text"  name="reserved" value="16"/></td>
				</tr>
				<tr  style="background-color:red">
					<td><<========加密域中的信息===========</td>
					<td>========加密域中的信息===========>></td>
				</tr>
				</tr>
				<tr>
				<td style="text-align: right">付款人银行号:<input type="text"  name="debtorBank"  value="1"/></td>
				<td style="text-align: right">付款人账号:<input type="text"  name="debtorAccount"  value="1111"/></td>
				</tr>
				<tr>
				<td style="text-align: right">付款人名称:<input type="text"  name="debtorName"  value="1111"/></td>
				<td style="text-align: right">付款合同号:<input type="text"  name="debtorConsign"  value="10000000002103"/></td>
				</tr>
				<tr>
				<td style="text-align: right">收款人银行号:<input type="text"  name="creditorBank"  value="1"/></td>
				<td style="text-align: right">收款人账号:<input type="text"  name="creditorAccount"  value="1"/></td>
				</tr>
				<tr>
				<td style="text-align: right">收款人名称:<input type="text"  name="creditorName"  value="1"/></td>
				<td style="text-align: right">摘要:<input type="text"  name="summary"  value="20"/></td>
				</tr>
			</table>
			<h2>加密:<input type="button" value="加密" onclick="enc('paysubmit')">请求:<input type="button" value="请求接口" onclick="askApi('paysubmit')"></h2>
		</form>
	</div>
	<div id="links">
		<h2>实时代收</h2>
		<form id="collectsubmit" action="collectsubmit"> 
			<table>
			<tr>
				<td style="text-align: right">版本:<input type="text"  name="version" value="1.0"/></td>
				<td style="text-align: right">编码方式:<input type="text"  name="encoding" value="1"/></td>
				</tr><tr>
				<td style="text-align: right">交易类型:<input type="text"  name="txnType" value="01"/></td>
				<td style="text-align: right">交易子类:<input type="text"  name="txnSubType" value="00"/></td>
				</tr><tr>
				<td style="text-align: right">产品类型:<input type="text"  name="bizType" value="000002"/></td>
				<td style="text-align: right">通知地址:<input type="text"  name="backUrl" value="www.sina.com"/></td>
				</tr><tr>
				<td style="text-align: right">委托机构代码:<input type="text"  name="merId" value="200000000000610"/></td>
				<td style="text-align: right">委托机构全称:<input type="text"  name="merName" value="全称"/></td>
				</tr><tr>
				<td style="text-align: right">委托机构简称:<input type="text"  name="merAbbr" value="8简称"/></td>
				<td style="text-align: right">委托机构订单号:<input type="text"  name="orderId" value="934567"/></td>
				</tr><tr>
				<td style="text-align: right">订单发送时间:<input type="text"  name="txnTime" value="20170306060606"/></td>
				<td style="text-align: right">支付超时时间:<input type="text"  name="payTimeout" value="20170307060606"/></td>
				</tr><tr>
				<td style="text-align: right">交易金额:<input type="text"  name="txnAmt" value="12"/></td>
				<td style="text-align: right">交易币种:<input type="text"  name="currencyCode" value="156"/></td>
				</tr><tr>
				<td style="text-align: right">加密信息域:<input type="text"  name="encryptData" value="14"/></td>
				<td style="text-align: right">订单描述:<input type="text"  name="orderDesc" value="15"/></td>
				</tr><tr>
				<td style="text-align: right">保留域:<input type="text"  name="reserved" value="16"/></td>
				</tr>
				<tr  style="background-color:red">
					<td><<========加密域中的信息===========</td>
					<td>========加密域中的信息===========>></td>
				</tr>
				<tr>
				<td style="text-align: right">付款人银行号:<input type="text"  name="debtorBank"  value="1"/></td>
				<td style="text-align: right">付款人账号:<input type="text"  name="debtorAccount"  value="1111"/></td>
				</tr>
				<tr>
				<td style="text-align: right">付款人名称:<input type="text"  name="debtorName"  value="1111"/></td>
				<td style="text-align: right">付款合同号:<input type="text"  name="debtorConsign"  value="10000000002103"/></td>
				</tr>
				<tr>
				<td style="text-align: right">收款人银行号:<input type="text"  name="creditorBank"  value="1"/></td>
				<td style="text-align: right">收款人账号:<input type="text"  name="creditorAccount"  value="1"/></td>
				</tr>
				<tr>
				<td style="text-align: right">收款人名称:<input type="text"  name="creditorName"  value="1"/></td>
				<td style="text-align: right">摘要:<input type="text"  name="summary"  value="20"/></td>
				</tr>
			</table>
			</table>
			<h2>加密:<input type="button" value="加密" onclick="enc('collectsubmit')">请求:<input type="button" value="请求接口" onclick="askApi('collectsubmit')"></h2>
		</form>
	</div>
	<div id="links">
	</div>
	<div id="links">
		<h2>交易查询</h2>
		<form id="tradequery" action="tradequery">
			<table>
			<tr>
				<td style="text-align: right">	版本	:<input type="text"  name="version" value="1.0"/></td>
				<td style="text-align: right">	编码方式	:<input type="text"  name="encoding" value="1"/></td>
				</tr>
				<tr>
				<td style="text-align: right">	交易类型	:<input type="text"  name="txnType" value="03"/></td>
				<td style="text-align: right">	交易子类	:<input type="text"  name="txnSubType" value="00"/></td>
				</tr>
				<tr>
				<td style="text-align: right">	产品类型	:<input type="text"  name="bizType" value="000002"/></td>
				<td style="text-align: right">	订单类型	:<input type="text"  name="orderType" value="01"/></td>
				</tr>
				<tr>
				<td style="text-align: right">	受理订单号	:<input type="text"  name="tn" value="27"/></td>
				</tr>
			</table>
			<h2>加密:<input type="button" value="加密" onclick="enc('tradequery')">请求:<input type="button" value="请求接口" onclick="askApi('tradequery')"></h2>
		</form> 
	</div>
	<div id="links">
		<h2>返回的结果</h2>
		<div id="showInfo" style="width:100% ;word-wrap:break-word; overflow:hidden;">
		
		</div>
	</div>
</div>
<script>
	function askApi(){
		$.ajax({
                type: "POST",
                url:"payAndCollectApi",
                data:$('#miresult').serialize(),
                async: false,
                error: function(request) {
                    alert(request.responseJSON.message);
                },
                success: function(data) {
                	data=JSON.stringify(data);
                	alert(data);
                	var html ='<p>'+data;
                	html+='</p>';
                    var divshow = $("#showInfo");
				    divshow.text("");
				    divshow.append(html); 
                }
            })
		}
	
	function enc(urlid){
		$.ajax({
                type: "POST",
                url:urlid,
                data:$('#'+urlid).serialize(),
                async: false,
                error: function(request) {
                    alert(request.responseJSON.message);
                },
                success: function(data) {
                	$("#sign").val(data.sign)
                	$("#addit").val(data.addit)
                	$("#data").val(data.data)
                	
                	var sign ='<p>'+data.sign;
                	sign+='</p>';
                	var divsign = $("#divsign");
                	divsign.text("");
                	divsign.append(sign); 
                	
                	var datas ='<p>'+data.data;
                	datas+='</p>';
                	var divdata = $("#divdata");
                	divdata.text("");
                	divdata.append(datas); 
                	
                	var addit ='<p>'+data.addit;
                	addit+='</p>';
                	var divaddit = $("#divaddit");
                	divaddit.text("");
                	divaddit.append(addit); 
                }
            })
		}
</script>
</body>
</html>